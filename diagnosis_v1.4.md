# 俺の付箋 - 現状診断と改善提案 (v1.4)

現在の実装 (v1.4) と要求仕様を分析し、**「付箋アプリとしての完成度」**と**「データの健全性」**の観点から改善すべき点 TOP 10 を選出しました。

## 診断サマリ
- **基本機能**: 「書く」「貼る」「保存する」は非常に高品質で安定的。
- **欠落機能**: 「捨てる（削除）」「前面固定」という付箋の基本的特性が未実装。
- **リスク**: 画像機能追加に伴い、ゴミファイル（使われなくなった画像）の残留リスク発生。

---

## 改善提案 TOP 10

### 🚨 優先度: S (必須級 - 付箋として致命的)



#### 2. 常に手前に表示 (Always on Top)
- **現状**: 他のウィンドウ（ブラウザやZoom等）の後ろに隠れてしまい、「付箋」としての役割（常に目に入るメモ）を果たしきれていません。
- **提案**: 右クリックメニューに「📌 常に手前に表示」トグルを追加し、Tauriの `set_always_on_top` APIを制御します。

### ⚠️ 優先度: A (データ整合性・使い勝手)

#### 3. 孤立画像のクリーニング (Image GC)
- **現状**: キャプチャした画像は `assets/` に永久保存されます。付箋内の画像を消したり、付箋自体を消しても、画像ファイルはディスクに残り続け、容量を圧迫します。
- **提案**: 定期的、または削除時に「どこからも参照されていない画像」を検出し、削除またはアーカイブする機能が必要です。

#### 4. 元に戻す/やり直し (Undo/Redo) の強化
- **現状**: CodeMirror内では Undo できますが、誤って付箋全体を消したり、テキストを全消去してアプリを閉じてしまった場合、自動保存によりデータが失われます。
- **提案**: シンプルな「直前のファイルバックアップ」または「ゴミ箱機能」の実装で、事故を防ぐ仕組みが必要です。

#### 5. 意図しないファイル上書きの防止 (Filename Conflict)
- **現状**: 「1行目＝ファイル名」は便利ですが、うっかり既存のファイルと同じ1行目を書くと、リネームロジックが働きます（現在は連番付与などで回避していますが、ユーザーが混乱する可能性があります）。
- **提案**: 重複時は自動で `(2)` を付けるなど、Excelライクな衝突回避UIの洗練が必要です。

### 💡 優先度: B (機能拡張・UX向上)

#### 6. 全文検索機能 (Full-text Search)
- **現状**: タグ絞り込みはありますが、本文の内容で探す機能がありません。付箋が増えると「どこに書いたっけ？」が発生します。
- **提案**: ツールバーまたはトレイアイコンから、全付箋を横断検索する簡易検索バーの実装。

#### 7. ショートカットキーの拡充
- **現状**: マウス操作メインです。キーボードユーザーのために `Ctrl+N` (新規)、`Ctrl+W` (閉じる)、`Ctrl+Shift+S` (キャプチャ) 等が必要です。
- **提案**: グローバルショートカット、またはアプリ内ショートカットの実装。

#### 8. ダークモード対応
- **現状**: 背景色はパステルカラー（黄・青・ピンク）のみで、まぶしいと感じるユーザーもいます。
- **提案**: 「俺の付箋・ダーク」として、暗色背景＋白文字のテーマ追加。

#### 9. フォントサイズの一括変更
- **現状**: 個別設定や、そもそも変更UIが見当たりにくい（設定ファイル依存？）。
- **提案**: Ctrl+ホイールでのズームイン・アウトや、設定画面でのベースフォントサイズ変更対応。

#### 10. モバイル/クラウド同期への布石
- **現状**: 完全ローカル。スマホで見たい需要に応えられません。
- **提案**: ディレクトリを OneDrive / Dropbox / iCloud 下に設定することを公式サポート（FAQ化）するか、将来的なSync機能の設計。
