# 俺の付箋 (Ore no Fusen) 要求仕様書 Δ0.2

## プロジェクト概要
**「俺の付箋」**は、Obsidian Vault などのローカル Markdown ファイルを、デスクトップ上に貼り付けられた「付箋」のように軽快に操作・編集するためのミニマリスト向けアプリケーションです。

## 主要機能
- **インライン・ダイレクト編集 (ダブルクリック)**: 
  - 閲覧モードの文章を**ダブルクリック**するだけで編集モード（textarea）に移行。誤操作による編集開始を防止。
  - フォーカスが外れる（他アプリへの切替、余白クリック）と自動で保存して閲覧モードへ復元。
  - `Ctrl + S` での即時保存、`Esc` での編集キャンセルに対応。
- **高精度ホバー操作とコーナーガイド**:
  - マウスの位置に合わせて「移動可」「編集可」を表示。
  - **コーナーガイド**: ウィンドウの**四隅（コーナー）**にマウスを近づけた時（斜め矢印ポインタが出るエリア）だけ「📏サイズ連動」を表示。
  - ファイル名表示すら削ぎ落とし、現在の操作可能状態のみをミニマルに提示。
  - **ウィンドウ境界ガード**: ドラッグ中や高速移動時でも、マウスがウィンドウ外に出た瞬間に確実にバーを消去。
- **ドラッグ＆ドロップ移動とジャストフィット**:
  - 付箋の背景領域や余白を掴んで、デスクトップ上のどこへでも自由に配置可能。
  - **ジャストフィット**: 余白を**ダブルクリック**すると、現在の文字サイズで内容がぴったり収まるようにウィンドウサイズを自動調整。
  - **選択優先ロジック**: テキスト要素（p, li, h1-h3等）の上では選択操作を優先し、ドラッグやダブルクリックを抑制。
- **強調表示（🔴）システム**:
  - 文字を選択してコンテキストメニューまたはホバーボタンから「強調」を選択すると、独自の `span.hl` タグで装飾。
- **インテリジェンス・コンテキストメニュー**:
  - 右クリックで「ノート切替」「新規作成」「フォルダ選択」「付箋をはがす」等の全機能にアクセス可能。
- **「はがす」機能と透明化**:
  - 不要になった付箋をゴミ箱へ移動し、画面から消去。
  - はがした後は完全に透明なウィンドウとなり、デスクトップの邪魔をしない。左上の極小ボタンからいつでも「再貼付」が可能。

## 技術スタック
- **Frontend**: Next.js 14 (App Router), React 18, Tailwind CSS
- **Backend**: Tauri v2 (Rust)
- **Styling**: Vanilla CSS, Tailwind CSS
- **Markdown**: ReactMarkdown, remark-gfm, remark-breaks, rehype-raw
- **OS**: Windows (最適化済み)

## UI/UX の極み (A6 Density & Paper Look)
- **読みやすさと密度の両立**: 本文のフォントサイズを `10.5px` に微増させ、極限の密度を保ちつつ視認性を向上。
- **フォントの統一**: 本文およびホバー上のステータス表示（移動可/編集可）に `BIZ UDPGothic` を適用し、システム全体で一貫した美しいタイポグラフィを実現。
- **付箋デザイン**: `BIZ UDGothic` を採用し、Windows 上での視認性を極限まで高めた薄黄色（#f7e9b0）の紙質を再現。
- **物理的な密度**: 余白、行間（1.2〜1.4）、リストのインデントを数ピクセル単位で微調整し、限られた面積に最大の情報を配置。
- **透過ウィンドウ**: Tauri の透過機能を活用し、デスクトップの背景を活かしたスタイリッシュな外観。

## システム要求
- **フォルダ連携**: Obsidian Vault 等の Markdown フォルダを指定可能。
- **自動保存**: 編集中の内容を 800ms のデバウンスで逐次保存。
- **透過設定**: `tauri.conf.json` で `transparent: true` が有効であること。

---
*更新日: 2026-01-04*  
*バージョン: Δ0.2*
