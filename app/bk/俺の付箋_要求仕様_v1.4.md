# 俺の付箋 - 要求仕様書 v1.4

**バージョン**: 1.4  
**日付**: 2026-01-25  
**ステータス**: ✅ 実装完全準拠 (Implementation Aligned)

## 1. 概要 (Overview)
「俺の付箋」は、**Markdownテキストファイルをそのまま付箋としてデスクトップに貼れる**シンプルで強力なメモアプリです。
一番の特徴は「**書いた内容＝ファイル名**」になること。タイトルを考える必要も、ファイル名を付ける手間もありません。
ただ書くだけで、自動的に整理されたテキストファイルとして保存されます。

## 2. 機能一覧 (Feature Matrix)

| カテゴリ | 機能名 | 概要 |
| :--- | :--- | :--- |
| **基本機能** | **Markdown付箋** | 普通の付箋機能に加え、ファイル名の自動同期や常駐・自動保存に対応 |
| **装飾・リンク** | **リッチテキスト** | 文字色の変更（赤太字）、見出し、クリック可能なリンクの挿入 |
| **画像** | **画像・キャプチャ** | 画面スクショの即時挿入（カメラボタン）、画像の貼り付けとリサイズ |
| **整理** | **タグ・色分け** | タグによる絞り込み検索や、背景色（3色）の変更で整理も簡単 |

---

## 3. ユースケース定義 (Use Cases)

### 3.1. 初期化・システム (System & Lifecycle)

#### UC-01: 初回セットアップ
- **基本フロー**:
  1. 初回起動時、保存先フォルダ（ベースフォルダ）の設定ダイアログを表示。
  2. ユーザーは「ドキュメント配下に作成」または「既存フォルダを指定」を選択。
  3. 設定完了後、アプリが使用可能になる。

#### UC-02: アプリケーションの終了
- **基本フロー**: システムトレイアイコンを右クリック → 「終了」を選択。

#### UC-03: ボスキー (Boss Key)
- **基本フロー**:
  1. システムトレイアイコンをクリック（または右クリックメニュー）。
  2. 「全部隠す」で全ての付箋を非表示にする。
  3. 「全部戻す」で全ての付箋を元の位置に再表示する。

### 3.2. 付箋の基本操作 (Basic Operations)

#### UC-04: 新規付箋の作成
- **基本フロー**:
  1. 既存の付箋上で右クリック → 「📝 新規メモ」を選択。
  2. 新しい付箋ウィンドウが起動する。

#### UC-05: 付箋の移動 (Drag)
- **基本フロー**:
  1. ヘッダ部、フッタ部、またはテキスト表示部（閲覧モード時）をドラッグ。
  2. 画面上の任意の位置へウィンドウを移動可能。
  3. 位置情報は即座にファイル内（Frontmatter）に保存される。

#### UC-06: 色の変更
- **基本フロー**:
  1. 右クリック → 「🎨 色を変更」サブメニューを選択。
  2. Blue, Pink, Yellow のいずれかを選択し、背景色を変更する。

#### UC-07: ファイル名の自動同期
- **基本フロー**:
  1. テキストの1行目を編集する。
  2. 直後（0.8秒後）に、ファイル名が自動的に `YYYYMMDD_1行目.md` にリネームされる。
  3. 禁則文字は自動的に `_` に置換される。

### 3.3. 編集と閲覧 (Editing & Viewing)

#### UC-08: モード切り替え (Display ⇔ Edit)
- **構造定義**:
  - **ヘッダ部**: 上部タグ領域。
  - **編集部**: 中央テキスト領域。
  - **フッタ部**: 下部余白。
- **操作マトリクス**:
  | モード | アクション | 結果 |
  | :--- | :--- | :--- |
  | **表示モード** | ヘッダ・編集部・フッタを**ダブルクリック** | **編集モード開始** |
  | **編集モード** | ヘッダ・フッタ(余白)を**ダブルクリック** | **編集終了** (表示へ) |
  | | 編集部(テキスト)をダブルクリック | 単語選択 |

#### UC-09: リッチテキスト編集
- **基本フロー**: CodeMirrorエディタによるMarkdown入力。
- **入力支援**:
  - **太字**: `**` (赤色強調)
  - **見出し**: `# ` (左寄せ・H1)
  - **リスト**: `- ` (黒丸)
  - **タスク**: `[ ]` (チェックボックス)
- **ホバーツールバー**: 編集モード時、マウスホバーで装飾用ボタン（B, H1, List, Check）を表示。

#### UC-10: インタラクティブ操作 (表示モード)
- **チェックボックス**: `[ ]` をクリックして `[x]` にトグル可能。
- **リンク**: URLやファイルパスをクリックして開くことが可能。

### 3.4. 画像・マルチメディア (Multimedia)

#### UC-11: 画面キャプチャ (カメラ機能)
- **基本フロー**:
  1. ツールバーの「📷」ボタンをクリック。
  2. アプリが一時的に隠れ、画面選択モード（Snipping Tool等）が起動。
  3. 撮影後、画像ファイル(`assets/YYYYMMDD_seq.png`)が自動作成され、リンクが挿入される。

#### UC-12: 画像リサイズ (Live Preview)
- **基本フロー**:
  1. エディタ内の画像をドラッグしてサイズ（倍率）を変更可能。
  2. 変更結果はMarkdown `![alt|scale](path)` として保存される。

### 3.5. 整理・管理 (Organization)

#### UC-13: タグの追加
- **基本フロー**: 右クリック → 「🏷️ タグ」から新規追加または既存選択。ヘッダにチップ表示。

#### UC-14: タグの削除
- **基本フロー**: 右クリック → 「🏷️ タグ」→「削除モード」でタグを選択して削除。

#### UC-15: タグによる絞り込み
- **基本フロー**: システムトレイ → 「🏷️ タグで絞り込み」から、表示したいタグのみを選択（OR検索）。

#### UC-16: エクスプローラーで開く
- **基本フロー**: 右クリック → 「📂 エクスプローラーで開く」でファイルの保存場所を表示。

### 3.6. 未実装・廃止機能 (Excluded Features)
- **論理削除**: 実装なし（v1.3時点で除外）。
- **常に手前に表示**: 実装なし（v1.3時点で除外）。

---
